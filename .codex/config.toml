# ref: https://developers.openai.com/codex/config-sample

################################################################################
# Core Model Selection
################################################################################
model = "gpt-5.3-codex"
review_model = "gpt-5.2-codex"
model_verbosity = "high" # 詳細な応答の冗長さ（情報量の多さ）

# from https://steipete.me/posts/2025/shipping-at-inference-speed#the-model-shift
# Leave room for native compaction near the 272–273k context window.
# Formula: 273000 - (tool_output_token_limit + 15000)
# With tool_output_token_limit=25000 ⇒ 273000 - (25000 + 15000) = 233000
model_auto_compact_token_limit = 233000
tool_output_token_limit = 25000

################################################################################
# Reasoning & Verbosity (Responses API capable models)
################################################################################

model_reasoning_effort = "high" # モデルがどれだけ「考える」かの深さ

################################################################################
# Instruction Overrides
################################################################################

developer_instructions = "Think in English, but generate responses in Japanese."

################################################################################
# Notifications
################################################################################

notify = ["bash","-lc","[[ \"$OSTYPE\" == darwin* ]] && afplay /System/Library/Sounds/Ping.aiff"]

################################################################################
# Approval & Sandbox
################################################################################

# コマンド実行を承認するかどうかをプロンプトで確認すべきタイミング
# - untrusted: 「信頼済み」でないコマンド（危険操作など）は実行前に都度承認を求め
# - on-request: モデル（Codex）が判断して承認を要求する場合
# - on-failure: コマンドが失敗した場合のみ承認にエスカレート
# - never: いかなる場合も承認を求めず、すべての操作を自動で実行
approval_policy = "on-request"

# Filesystem/network sandbox policy for tool calls:
# - read-only (default)
# - workspace-write
# - danger-full-access (no sandbox; extremely risky)
sandbox_mode = "workspace-write"

################################################################################
# History & File Opener
################################################################################

file_opener = "cursor" # or vscode
personality = "pragmatic"

################################################################################
# Centralized Feature Flags (preferred)
################################################################################

[features]
unified_exec = true
apply_patch_freeform = true
skills = true
shell_snapshot = true

################################################################################
# Shell Environment Policy for spawned processes (table)
################################################################################

[shell_environment_policy]
inherit = "all"
include_only = ["PATH","HOME","USER"]
exclude = ["AWS_*","AZURE_*","*TOKEN*","*SECRET*","*KEY*"]

################################################################################
# UI, Notifications, and Misc (tables)
################################################################################

[tui]
#　デスクトップ通知に関する設定
# - "agent-turn-complete": エージェントの１ターン処理が完了した際に通知
# - "approval-requested": ユーザーの操作や承認が必要な時に通知
notifications = ["agent-turn-complete","approval-requested"]

################################################################################
# Web Search
################################################################################

# Web search mode: disabled | cached | live. Default: "cached"
# cached serves results from a web search cache (an OpenAI-maintained index).
# cached returns pre-indexed results; live fetches the most recent data.
# If you use --yolo or another full access sandbox setting, web search defaults to live.
web_search = "live"

################################################################################
# Define MCP servers under this table. Leave empty to disable.
################################################################################

# [mcp_servers.chrome-devtools]
# command = "npx"
# args = ["chrome-devtools-mcp"]
#
# [mcp_servers.playwright]
# command = "npx"
# args = ["-y", "@playwright/mcp"]
